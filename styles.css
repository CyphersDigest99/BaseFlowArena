/*
 * @file styles.css
 * @description Main stylesheet for the BaseFlowArena application. Defines the visual appearance, layout, and responsive behavior for all UI components, including the background, panels, word display, tooltips, modals, beat player, and more. Utilizes CSS variables for theme consistency and supports advanced features such as animations, flexbox/grid layouts, and responsive design. Dependencies include Google Fonts (Orbitron, Roboto) and FontAwesome for icons. This file is critical for the application's modern, interactive, and accessible look and feel.
 */

/* Import a Google Font (optional, e.g., Orbitron for a techy feel) */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap');

/* --- Base & Variables --- */
:root {
    --bg-color: transparent; /* Make base transparent to see canvas */
    --panel-bg: rgba(31, 31, 56, 0.92); /* Slightly transparent panel */
    --panel-bg-opaque: rgb(31, 31, 56); /* Opaque version for modals etc. */
    --border-color: rgba(74, 78, 105, 0.7); /* Semi-transparent border */
    --primary-accent: #00ffff; /* Cyan */
    --secondary-accent: #ff00ff; /* Magenta */
    --text-color: #e0e0e0;
    --text-bright: #ffffff;
    --highlight-color: #f9a826; /* Yellow/Gold for highlight */
    --red-color: #ff4500;
    --green-color: #00ff00;
    --disabled-color: #6c757d;

    --beat-interval: 0.5s; /* Updated by JS */
    --cycle-duration: 10s; /* Updated by JS */

    --font-main: 'Roboto', sans-serif;
    --font-display: 'Orbitron', sans-serif; /* More distinct font */
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* --- Three.js Canvas Background --- */
#bg-canvas {
    position: fixed; /* Fixed position to stay in background */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1; /* Send it to the back */
    display: block; /* Avoid potential extra space */
}

/* --- Main Layout & Structure --- */
body {
    /* Ensure body allows background canvas to show */
    background: linear-gradient(to bottom, rgba(16, 16, 32, 0.8), rgba(5, 5, 16, 0.9)); /* Semi-transparent gradient overlay */
    font-family: var(--font-main);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    padding: 15px;
    overflow-x: hidden; /* Prevent horizontal scroll */
    position: relative; /* Needed for z-index context */
    z-index: 1; /* Keep body content above background canvas */
}

.game-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    background-color: var(--panel-bg);
    border-radius: 8px;
    margin-bottom: 20px;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 15px rgba(0, 255, 255, 0.1);
    position: relative; /* Ensure header is above body gradient */
    z-index: 10;
}

.game-header h1 {
    margin: 0;
    font-size: 1.8em;
    font-family: var(--font-display);
    color: var(--primary-accent);
    text-shadow: 0 0 5px var(--primary-accent);
}

.stats-display {
    display: flex;
    gap: 30px;
}

.stat-item {
    text-align: right;
}

.stat-label {
    display: block;
    font-size: 0.8em;
    color: var(--text-color);
    opacity: 0.7;
}

.stat-value {
    font-family: var(--font-display);
    font-size: 1.6em;
    color: var(--highlight-color);
    font-weight: bold;
    transition: transform 0.3s ease-out, color 0.3s ease-out; /* For pulse */
}

/* Gamification Pulse Animations */
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
.pulse { animation: pulse 0.3s ease-out; }

@keyframes pulse-grow { 0%, 100% { transform: scale(1); color: var(--highlight-color); } 50% { transform: scale(1.25); color: var(--green-color); } }
.pulse-grow { animation: pulse-grow 0.4s ease-out; }

/* Flow Meter Animations */
@keyframes flow-pulse {
    0% { 
        width: 0%; 
        box-shadow: 0 0 5px var(--primary-accent);
    }
    50% { 
        width: 100%; 
        box-shadow: 0 0 20px var(--primary-accent), 0 0 30px var(--secondary-accent);
    }
    100% { 
        width: 0%; 
        box-shadow: 0 0 5px var(--primary-accent);
    }
}
.flow-pulse { 
    animation: flow-pulse 0.6s ease-out; 
}

/* Dynamic Flow Meter Styles */
.flow-meter-bar {
    transition: width 0.3s ease-out, box-shadow 0.3s ease-out, background 0.3s ease-out;
}

@keyframes flow-breathe {
    0%, 100% { 
        opacity: 0.9; 
        transform: scaleY(1);
    }
    50% { 
        opacity: 1; 
        transform: scaleY(1.02);
    }
}

/* --- Main Game Area --- */
.game-arena {
    display: flex;
    flex-grow: 1; /* Takes remaining height */
    gap: 15px;
    width: 100%;
    max-width: 1400px; /* Wider max width */
    margin: 0 auto;
    position: relative; /* Ensures children are layered correctly */
    z-index: 2; /* Keep main content above body bg */
}

.control-panel {
    flex: 0 0 280px; /* Fixed width for side panels */
    background-color: var(--panel-bg);
    padding: 15px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    gap: 15px; /* Spacing between control groups/panels inside */
    height: fit-content; /* Adjust height based on content */
}

.center-stage {
    flex-grow: 1; /* Takes remaining horizontal space */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px; /* Consistent gap */
}

.panel { /* General styling for inner panels (like transcript, bpm, frequency, rng) */
    background-color: rgba(0, 0, 0, 0.3); /* Darker inner panel */
    padding: 15px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    width: 100%; /* Make inner panels take full width of their container */
}
.panel h3 { /* Headers inside panels */
    font-size: 1.1em;
    margin-bottom: 10px;
    color: var(--secondary-accent);
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 1px dashed var(--border-color);
    padding-bottom: 5px;
}


h2 { /* Headers for main panels/sections */
    font-family: var(--font-display);
    color: var(--primary-accent);
    margin-bottom: 10px; /* Reduced bottom margin */
    text-shadow: 0 0 5px var(--primary-accent);
    font-size: 1.3em;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 5px;
    display: flex;
    align-items: center;
    gap: 8px;
}
h2 .fas { color: var(--secondary-accent); }

/* --- Buttons & Controls --- */
button, select, input[type="number"], input[type="range"] {
    font-family: var(--font-main);
    padding: 8px 12px;
    border-radius: 5px;
    border: 1px solid var(--primary-accent);
    background-color: transparent;
    color: var(--primary-accent);
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
    font-size: 0.9em;
    vertical-align: middle; /* Align controls nicely */
}

button:hover, select:hover {
    background-color: rgba(0, 255, 255, 0.1);
    box-shadow: 0 0 8px var(--primary-accent);
    color: var(--text-bright);
}

button:active {
    transform: scale(0.96);
    background-color: rgba(0, 255, 255, 0.2);
}
button:disabled, select:disabled, input:disabled {
    border-color: var(--disabled-color);
    color: var(--disabled-color);
    cursor: not-allowed;
    background-color: transparent;
    box-shadow: none;
    opacity: 0.6;
}
button:disabled:hover {
    background-color: transparent;
    box-shadow: none;
}

select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='5'%3E%3Cpath fill='%2300ffff' d='M0 0l5 5 5-5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 10px center;
    padding-right: 30px;
}
select:disabled {
    border-color: var(--disabled-color);
    color: var(--disabled-color);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='5'%3E%3Cpath fill='%236c757d' d='M0 0l5 5 5-5z'/%3E%3C/svg%3E");
}


input[type="number"] {
    max-width: 60px;
    text-align: center;
    border-color: var(--text-color);
    color: var(--text-color);
    background-color: rgba(0,0,0,0.2);
}
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
input[type=number] { -moz-appearance: textfield; }

/* Syllable filter specific styling */
#min-syllables, #max-syllables {
    width: 60px;
    min-width: 60px;
    max-width: 60px;
    text-align: center;
    font-size: 0.9em;
    padding: 6px 8px;
}

input[type="range"] {
    cursor: pointer;
    accent-color: var(--primary-accent); /* Style the slider */
    margin: 0 10px;
    flex-grow: 1;
    padding: 0; /* Remove padding for range */
    border: none; /* Remove border for range */
    background: transparent; /* Remove background for range */
}

.icon-button { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; }
.icon-button .fas, .icon-button .far { font-size: 1.1em; min-width: 1.1em; text-align: center; } /* Ensure icon takes space */
.icon-button .btn-text { display: inline; }
.small-button { padding: 5px 8px; font-size: 0.8em;}
.tiny-button { padding: 3px 6px; font-size: 0.7em;}
.large-button { padding: 12px 18px; font-size: 1.1em;}

.red-button { border-color: var(--red-color); color: var(--red-color); }
.red-button:hover { background-color: rgba(255, 69, 0, 0.1); box-shadow: 0 0 8px var(--red-color); }


.control-group { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.control-group label { font-weight: bold; color: var(--secondary-accent); display: inline-flex; align-items: center; gap: 5px; min-width: 50px;} /* Ensure label takes some width */

/* --- Center Stage Styling --- */
.word-display-wrapper {
    position: relative;
    width: 100%;
    max-width: 700px;
    margin-bottom: 15px;
}

#feedback-message {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    min-height: 25px;
    font-size: 1.1em;
    font-weight: bold;
    text-align: center;
    transition: color 0.3s ease, text-shadow 0.3s ease;
    width: auto;
    padding: 5px 15px;
    border-radius: 4px;
    z-index: 1000;
    pointer-events: none;
}
#feedback-message.success {
    color: var(--green-color);
    text-shadow: 0 0 8px var(--green-color);
    background-color: rgba(0, 255, 0, 0.1);
}
#feedback-message.error {
    color: var(--red-color);
    text-shadow: 0 0 8px var(--red-color);
     background-color: rgba(255, 69, 0, 0.1);
}

/* --- NEW WORD DISPLAY UNIT (Three-Cell Layout) --- */
#word-display-unit {
    display: grid;
    grid-template-columns: auto 1fr auto;
    grid-template-rows: auto 1fr 2fr 1fr auto;
    grid-template-areas:
        ". up ."
        ". synonyms ."
        "left word right"
        ". definition ."
        ". down .";
    position: relative;
    background: linear-gradient(145deg, var(--panel-bg), rgba(42, 42, 74, 0.9));
    border: 2px solid var(--primary-accent);
    border-radius: 10px;
    padding: 20px 80px;
    margin-bottom: 0;
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.3), inset 0 0 15px rgba(0, 0, 0, 0.5);
    width: 100%;
    max-width: 700px;
    height: 320px;
    box-sizing: border-box;
}

/* Grid placement for navigation arrows */
.word-nav-arrow {
    background: transparent;
    border: none;
    color: var(--primary-accent);
    padding: 10px;
    cursor: pointer;
    font-size: 2em;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s, transform 0.2s;
}

.word-nav-arrow:disabled {
    color: var(--disabled-color);
    cursor: not-allowed;
    opacity: 0.4;
    transform: none;
}

.word-nav-arrow:disabled:hover {
    color: var(--disabled-color);
    transform: none;
}

.word-nav-arrow.side-arrow.left-arrow {
    grid-area: left;
    font-size: 2.5em;
    justify-self: center;
    align-self: center;
}
.word-nav-arrow.side-arrow.right-arrow {
    grid-area: right;
    font-size: 2.5em;
    justify-self: center;
    align-self: center;
}
.word-nav-arrow.top-bottom-arrow.up-arrow {
    grid-area: up;
    font-size: 2em;
    justify-self: center;
    align-self: center;
}
.word-nav-arrow.top-bottom-arrow.down-arrow {
    grid-area: down;
    font-size: 2em;
    justify-self: center;
    align-self: center;
}

/* Grid placement for content cells */
.word-display-cell.top-cell {
    grid-area: synonyms;
    min-height: 44px;
    padding: 0.5em 1em;
    word-wrap: break-word;
    overflow-wrap: break-word;
    white-space: normal;
    display: flex;
    align-items: center;
    justify-content: center;
}
.word-display-cell.middle-cell {
    position: relative;
    grid-area: word;
    min-height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(0, 255, 255, 0.5);
    border-radius: 12px;
}
.word-display-cell.bottom-cell {
    grid-area: definition;
    min-height: 44px;
    padding: 0.5em 1em;
    word-wrap: break-word;
    overflow-wrap: break-word;
    white-space: normal;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Remove obsolete 3D, absolute, and z-index styles from arrows/content */
.word-content-container,
#word-display-unit {
    transform: none !important;
    perspective: none !important;
    transform-style: flat !important;
    z-index: auto !important;
}

/* Updated word display styles for the middle cell */
#word-display {
    font-family: var(--font-display);
    font-size: 4em; /* Base font size - will be dynamically adjusted by JavaScript */
    font-weight: bold;
    color: var(--text-bright);
    text-shadow: 0 0 10px #fff, 0 0 15px var(--primary-accent);
    transition: color 0.4s ease-out, opacity 0.4s ease-out, transform 0.4s ease-out, font-size 0.2s ease-out;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 150px;
    line-height: 1;
    margin: 0;
    padding: 0;
    text-align: center;
    word-break: break-word;
    overflow-wrap: break-word;
    /* Ensure text fits within cell bounds */
    max-width: 100%;
    max-height: 100%;
    /* Ensure proper positioning relative to action buttons */
    position: relative;
    z-index: 1;
}

#word-display.shrink-word { animation: shrink-pulse var(--cycle-duration, 10s) linear forwards; }
@keyframes shrink-pulse {
    0% { opacity: 1; transform: scale(1); color: var(--text-bright); }
    85% { opacity: 0.8; transform: scale(0.8); color: var(--text-bright); }
    100% { opacity: 0; transform: scale(0.7); color: var(--green-color); }
}

/* Updated word info content styles for top and bottom cells */
.word-info-content {
    width: 100%;
    text-align: center;
    color: var(--primary-accent);
    background: rgba(0,0,0,0.25);
    border: 1.5px solid var(--primary-accent);
    border-radius: 7px;
    font-family: var(--font-main);
    font-weight: 500;
    letter-spacing: 0.01em;
    margin: 0;
    opacity: 0;
    filter: blur(6px);
    transition: opacity 0.7s cubic-bezier(.4,2,.6,1), filter 0.7s cubic-bezier(.4,2,.6,1);
    padding: 7px 18px;
    box-shadow: 0 0 12px 0 rgba(0,255,255,0.13);
    pointer-events: auto;
    user-select: text;
    overflow-wrap: break-word;
    white-space: pre-line;
    /* Dynamic font sizing to prevent overflow */
    font-size: clamp(0.8em, 2vw, 1.2em);
    line-height: 1.3;
    max-height: 100%;
    overflow: hidden;
    z-index: 2; /* Above cells but below navigation arrows */
}

.word-info-content.visible {
    opacity: 1;
    filter: blur(0);
    z-index: 2;
}

/* Specific styles for synonyms content */
#synonyms-content {
    font-size: clamp(0.9em, 2.5vw, 1.1em);
    line-height: 1.4;
    max-height: 100%;
    overflow: hidden;
    display: block;
    word-break: break-word;
}

/* Specific styles for definition content */
#definition-content {
    display: block;
    /* Remove nowrap to allow text wrapping */
    white-space: normal;
    overflow: hidden;
    /* Remove text-overflow ellipsis since we're allowing wrapping */
    font-size: clamp(0.9em, 2.5vw, 1.1em);
    transition: font-size 0.3s cubic-bezier(.4,2,.6,1);
    max-height: 100%;
    /* Allow text to wrap to second line */
    line-height: 1.3;
    word-wrap: break-word;
    overflow-wrap: break-word;
    /* Ensure text doesn't overflow the cell */
    max-width: 100%;
}

#definition-content.shrink {
    font-size: 0.8em;
}

/* Beat Player Panel Styles */
#beat-player-panel {
    margin-bottom: 15px;
}

.beat-display {
    background-color: rgba(0, 0, 0, 0.3);
    border: 1px solid var(--primary-accent);
    border-radius: 6px;
    padding: 8px 12px;
    margin-bottom: 12px;
    text-align: center;
    color: var(--primary-accent);
    font-size: 0.9em;
    font-weight: 500;
    min-height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    word-break: break-word;
    line-height: 1.3;
}

.beat-controls {
    display: flex;
    gap: 8px;
    margin-bottom: 10px;
    justify-content: center;
}

.beat-controls .large-button {
    flex: 1;
    max-width: 120px;
}

.beat-navigation {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
    justify-content: center;
}

.beat-navigation .small-button {
    flex: 1;
    max-width: 60px;
}

.beat-volume-control {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.beat-volume-control label {
    font-size: 0.9em;
    min-width: 70px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.volume-slider {
    flex: 1;
    height: 6px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 3px;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
}

.volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: var(--primary-accent);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
    transition: box-shadow 0.2s ease;
}

.volume-slider::-webkit-slider-thumb:hover {
    box-shadow: 0 0 12px var(--primary-accent);
}

.volume-slider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: var(--primary-accent);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 8px rgba(0, 255, 255, 0.5);
    transition: box-shadow 0.2s ease;
}

.volume-slider::-moz-range-thumb:hover {
    box-shadow: 0 0 12px var(--primary-accent);
}

/* Responsive adjustments for beat player */
@media (max-width: 768px) {
    .beat-display {
        font-size: 0.85em;
        padding: 6px 10px;
    }
    
    .beat-controls .large-button {
        max-width: 100px;
        font-size: 1em;
    }
    
    .beat-navigation .small-button {
        max-width: 50px;
    }
    
    .beat-volume-control label {
        min-width: 60px;
        font-size: 0.85em;
    }
}

@media (max-width: 480px) {
    .beat-display {
        font-size: 0.8em;
        padding: 5px 8px;
    }
    
    .beat-controls {
        gap: 6px;
    }
    
    .beat-controls .large-button {
        max-width: 90px;
        font-size: 0.9em;
        padding: 8px 12px;
    }
    
    .beat-navigation {
        gap: 6px;
    }
    
    .beat-navigation .small-button {
        max-width: 45px;
        font-size: 0.8em;
    }
    
    .beat-volume-control {
        gap: 6px;
    }
    
    .beat-volume-control label {
        min-width: 55px;
        font-size: 0.8em;
    }
    
    .volume-slider {
        height: 5px;
    }
    
    .volume-slider::-webkit-slider-thumb {
        width: 14px;
        height: 14px;
    }
    
    .volume-slider::-moz-range-thumb {
        width: 14px;
        height: 14px;
    }
}

/* Word Action Icons - Repositioned for new three-cell layout */
.word-action-icon {
    position: absolute;
    background: none;
    border: none;
    font-size: 1.4em;
    cursor: pointer;
    color: #666;
    padding: 5px;
    transition: color 0.2s ease, transform 0.2s ease, opacity 0.2s ease;
    opacity: 0.6;
    z-index: 5;
}

.word-action-icon:hover { 
    opacity: 1; 
    transform: scale(1.1); 
}

/* Override general hover rule for means-like icon to respect pinned state */
.word-action-icon.means-like-icon.pinned {
    color: var(--highlight-color) !important;
    opacity: 1 !important;
    animation: none;
    box-shadow: 0 0 8px var(--highlight-color);
    border-radius: 50%;
    background-color: rgba(249, 168, 38, 0.1);
}

.word-action-icon.means-like-icon.pinned:hover {
    color: var(--highlight-color) !important;
    opacity: 1 !important;
    transform: scale(1.1);
    box-shadow: 0 0 12px var(--highlight-color);
    animation: shimmer 1.5s ease-in-out infinite;
}

/* Blacklist icon - upper-left corner of middle cell */
.word-action-icon.blacklist-icon { 
    top: 8px;
    left: 8px;
    transform: none;
}

.word-action-icon.blacklist-icon:hover {
    transform: scale(1.1);
 }

/* Favorite icon - upper-right corner of middle cell */
.word-action-icon.favorite-icon { 
    top: 8px;
    right: 8px;
    transform: none;
}

.word-action-icon.favorite-icon:hover {
    transform: scale(1.1);
}

/* Definition/Synonym icon - bottom-center of middle cell */
.word-action-icon.means-like-icon {
    position: absolute;
    bottom: 8px;
    right: 8px;
    left: auto;
    transform: none;
    z-index: 20;
    transition: color 0.2s, transform 0.2s;
}

.word-action-icon.means-like-icon:hover {
    transform: none;
}

/* Unpinned tooltip state - starts dim */
.word-action-icon.means-like-icon:not(.pinned) {
    color: var(--secondary-accent);
    opacity: 0.7;
}

.word-action-icon.means-like-icon:not(.pinned):hover {
    color: var(--primary-accent);
    opacity: 1;
    animation: pulse-grow-book 0.35s cubic-bezier(.4,2,.6,1), shimmer 1.5s ease-in-out infinite;
}

@keyframes shimmer {
    0%, 100% { 
        opacity: 0.6; 
        color: var(--text-color); 
    }
    50% {
        opacity: 0.8; 
        color: var(--highlight-color); 
    }
}

.word-action-icon.means-like-icon:not(.pinned) i.fa-book {
    animation: pulse-grow-book 2s ease-in-out infinite;
}

.word-action-icon.means-like-icon.pinned i.fa-book-open {
    animation: none;
}

.word-action-icon.means-like-icon.pinned i.fa-random {
    animation: none;
}

.word-action-icon.means-like-icon.pinned i.fa-paragraph {
    animation: none;
}

@keyframes pulse-grow-book {
    0% { transform: scale(1); }
    40% { transform: scale(1.18); }
    100% { transform: scale(1); }
}

/* Word Subtext */
.word-subtext {
    position: absolute;
    bottom: 25px; /* Position above the means-like icon */
    left: 50%;
    transform: translateX(-50%);
    color: var(--secondary-accent);
    font-size: 0.9em;
    font-style: italic;
    text-align: center;
    max-width: 80%;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    z-index: 5;
}

.word-subtext.visible {
    opacity: 1;
}

/* Active states for action icons */
.word-action-icon.blacklist-icon.active { 
    color: var(--red-color); 
    opacity: 1; 
}

.word-action-icon.favorite-icon .far { 
    display: inline; 
}

.word-action-icon.favorite-icon .solid-star { 
    display: none; 
}

.word-action-icon.favorite-icon.active { 
    color: var(--highlight-color); 
    opacity: 1; 
}

.word-action-icon.favorite-icon.active .far { 
    display: none; 
}

.word-action-icon.favorite-icon.active .solid-star { 
    display: inline; 
}

/* Responsive adjustments for the new word display unit */
@media (max-width: 1200px) {
    .game-arena { 
        flex-direction: column; 
    }
    
    .control-panel { 
        flex: 0 0 auto; 
        width: 100%; 
        flex-direction: row; 
        flex-wrap: wrap; 
        justify-content: space-around; 
    }
    
    .panel-left { 
        order: 2; 
    }
    
    .panel-right { 
        order: 3; 
    }
    
    .center-stage { 
        order: 1; 
        width: 100%; 
    }
    
    .word-nav-arrow.side-arrow { 
        font-size: 2em; 
    }
    
    .word-display-wrapper {
        max-width: 600px;
    }
    
    #feedback-message {
        font-size: 1em;
        padding: 4px 12px;
    }
    
    #word-display-unit { 
        height: 280px; 
    }
    
    .word-display-cell.middle-cell {
        min-height: 100px;
        max-height: 140px;
    }
}

@media (max-width: 768px) {
    body { 
        padding: 10px; 
    }
    
    .game-header { 
        flex-direction: column; 
        gap: 10px; 
        text-align: center; 
        padding: 10px;
    }
    
    .stats-display { 
        justify-content: center; 
        gap: 20px; 
    }
    
    .stat-value { 
        font-size: 1.4em; 
    }
    
    h1 { 
        font-size: 1.5em; 
    }
    
    .word-display-wrapper {
        max-width: 500px;
    }
    
    #feedback-message {
        font-size: 0.9em;
        padding: 3px 10px;
    }
    
    #word-display-unit { 
        height: 240px; 
        padding: 15px 60px; 
    }
    
    .word-display-cell.middle-cell {
        min-height: 80px;
        max-height: 120px;
    }
    
    .icon-button .btn-text { 
        display: none; 
    }
    
    .icon-button { 
        padding: 8px; 
    }
    
    .activation-button .btn-text,
    .large-button .btn-text { 
        display: inline; 
    }
    
    .large-button { 
        padding: 12px; 
        font-size: 1em;
    }
    
    .control-panel { 
        padding: 10px; 
    }
    
    .control-group { 
        justify-content: center; 
    }
    
    #rng-display-area { 
        margin-top: 10px; 
    }
    
    .rng-slot { 
        font-size: 1.5em; 
        width: 2em; 
        height: 1.7em; 
        line-height: 1.6em; 
    }
    
    #rhyme-results-list li {
        font-size: 0.9em;
        padding: 8px 10px;
    }
}

@media (max-width: 480px) {
    h1 { 
        font-size: 1.3em;
    }
    
    .stat-value { 
        font-size: 1.2em; 
    }
    
    .word-display-wrapper {
        max-width: 400px;
    }
    
    #feedback-message {
        font-size: 0.8em;
        padding: 2px 8px;
    }
    
    #word-display-unit { 
        height: 200px; 
        padding: 10px 40px; 
    }
    
    .word-display-cell.middle-cell {
        min-height: 60px;
        max-height: 100px;
    }
    
    .word-nav-arrow.side-arrow { 
        font-size: 1.5em; 
        left: 5px; 
        right: 5px; 
    }
    
    .word-action-icon { 
        font-size: 1.2em; 
    }
    
    .word-action-icon.blacklist-icon { 
        left: 2px; 
    }
    
    .word-action-icon.favorite-icon { 
        right: 2px; 
    }
    
    .bpm-display-group { 
        flex-direction: column; 
        gap: 5px; 
    }
    
    #bpm-display { 
        font-size: 2em; 
    }
    
    .bpm-main-controls .large-button { 
        font-size: 1em; 
        padding: 10px 15px;
    }
    
    #new-transcript { 
        font-size: 0.85em; 
    }
    
    .flow-meter {
        height: 60px;
    }
    
    .flow-meter-container {
        height: 15px;
    }
    
    .control-group label { 
        min-width: auto; 
    }
    
    .activation-button { 
        font-size: 1em; 
        padding: 10px; 
        flex-basis: 48%; 
    }
    
    #timed-cycle-options { 
        flex-wrap: wrap; 
        justify-content: center; 
    }
    
    #rng-display-area { 
        margin-top: 10px; 
    }
    
    .rng-slot { 
        font-size: 1.3em; 
        width: 1.8em; 
        height: 1.6em; 
        line-height: 1.5em; 
    }
    
    #rhyme-results-list li {
        font-size: 0.85em;
        padding: 6px 8px;
    }
}

/* Activation Controls */
.activation-controls {
    margin-top: 10px;
    padding: 15px;
    background-color: rgba(0, 0, 0, 0.3);
    border-radius: 6px;
    border: 1px solid var(--border-color);
    width: 100%;
    max-width: 700px;
}

.activation-controls h2 {
    margin-bottom: 15px;
    font-size: 1.2em;
}

.activation-buttons {
    justify-content: space-around;
    margin-bottom: 15px;
}

.activation-button {
    flex-basis: 45%;
    justify-content: center;
    border-width: 2px;
    background-color: #333;
    color: #999;
    border-color: #555;
    position: relative;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
}

.activation-button .light {
    display: inline-block;
    width: 12px;
    height: 12px;
    background-color: #555;
    border-radius: 50%;
    margin-right: 8px;
    transition: all 0.3s ease;
    box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.5);
    vertical-align: middle;
}

 .activation-button i {
     margin-right: 8px;
 }

.activation-button.active {
    background-color: var(--primary-accent);
    color: var(--panel-bg-opaque);
    border-color: var(--primary-accent);
    box-shadow: 0 0 12px var(--primary-accent);
    font-weight: bold;
}

.activation-button#voice-mode-button.active {
    background-color: var(--red-color);
    border-color: var(--red-color);
    color: #fff;
    box-shadow: 0 0 15px var(--red-color);
    animation: pulse-on-air-glow 1.5s infinite ease-in-out;
}

.activation-button#voice-mode-button.active .light {
    background-color: #fff;
    box-shadow: 0 0 8px #fff, 0 0 12px var(--red-color);
}

@keyframes pulse-on-air-glow { 
    0% { box-shadow: 0 0 10px var(--red-color); } 
    50% { box-shadow: 0 0 20px var(--red-color); } 
    100% { box-shadow: 0 0 10px var(--red-color); } 
}

#timed-cycle-options {
    align-items: center;
    background-color: rgba(0,0,0,0.2);
    padding: 10px;
    border-radius: 4px;
}

#timed-cycle-options label {
    color: var(--secondary-accent);
    min-width: auto;
    margin-right: 5px;
    font-weight: normal;
}

/* Transcript Area */
.transcript-area { 
    width: 100%; 
    max-width: 700px; 
    height: 200px; 
    display: flex; 
    flex-direction: column; 
}

#new-transcript {
    flex-grow: 1;
    background-color: rgba(0, 0, 0, 0.5);
    padding: 10px;
    border-radius: 5px;
    color: var(--green-color);
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.95em;
    display: flex;
    flex-direction: column-reverse;
    overflow-y: auto;
    border: 1px solid rgba(0, 80, 0, 0.7);
    box-shadow: inset 0 0 10px rgba(0, 255, 0, 0.2);
}

#new-transcript div {
    margin-bottom: 3px;
    padding: 2px 4px;
    border-radius: 3px;
    opacity: 1;
    color: var(--green-color);
    transition: opacity 0.3s ease, color 0.3s ease;
    word-wrap: break-word;
}

#new-transcript div.interim {
    color: rgba(0, 255, 0, 0.6);
    opacity: 0.8;
}

/* Flow Meter Styling */
.flow-meter {
    width: 100%;
    max-width: 700px;
    min-height: 60px;
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    padding: 15px; /* Match .panel padding */
    box-sizing: border-box;
}

.flow-meter h2 {
    font-family: var(--font-display);
    color: var(--primary-accent);
    margin-bottom: 10px; /* Match .panel h2 */
    margin-top: 0;
    text-shadow: 0 0 5px var(--primary-accent);
    font-size: 1.3em;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 5px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.flow-meter-container {
    height: 24px;
    min-height: 24px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    border: 1px solid var(--border-color);
    overflow: hidden;
    position: relative;
    margin-top: 0;
    margin-bottom: 6px;
}

.flow-meter-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--primary-accent), var(--secondary-accent));
    border-radius: 10px;
    transition: width 0.3s ease-out;
    box-shadow: 0 0 5px var(--primary-accent);
    position: relative;
}

.flow-meter-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: flow-shimmer 2s infinite;
}

@keyframes flow-shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* BPM Panel */
.bpm-main-controls {
    display: flex;
    align-items: center;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 15px;
    width: 100%;
    padding: 15px 0;
    min-height: 70px;
}

.bpm-main-controls > #bpm-button,
.bpm-main-controls > #detect-bpm-button {
    opacity: 1;
}

.bpm-main-controls > .bpm-display-group {
    display: flex;
    align-items: center;
    text-align: center;
    opacity: 1;
}

#detect-bpm-button {
    border-color: var(--secondary-accent);
    color: var(--secondary-accent);
}

#detect-bpm-button:hover {
    background-color: rgba(255, 0, 255, 0.1);
    box-shadow: 0 0 8px var(--secondary-accent);
}

#detect-bpm-button.detecting {
    border-color: var(--red-color);
    color: var(--red-color);
    background-color: rgba(255, 69, 0, 0.1);
    box-shadow: 0 0 12px var(--red-color);
    cursor: pointer;
    opacity: 1;
}

#detect-bpm-button.detecting:hover {
    background-color: rgba(255, 69, 0, 0.2);
    box-shadow: 0 0 16px var(--red-color);
}

@keyframes spin { 
    0% { transform: rotate(0deg); } 
    100% { transform: rotate(360deg); } 
}

#detect-bpm-button.detecting .fa-stop {
    animation: pulse 1s ease-in-out infinite;
}

#bpm-display {
    font-family: var(--font-display);
    font-size: 2.5em;
    color: var(--primary-accent);
    line-height: 1;
}

.bpm-unit {
    display: block;
    font-size: 0.8em;
    opacity: 0.7;
    margin-left: 5px;
}

.bpm-adjust-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
}

#four-count-container {
    display: grid !important;
    gap: 6px;
    padding: 8px;
    background-color: rgba(0, 0, 0, 0.4);
    border-radius: 5px;
    border: 1px solid var(--border-color);
    min-height: 50px;
    width: 100%;
    max-width: 320px;
    margin: 15px auto;
}

.beat-box {
    background-color: #333;
    width: 100%;
    padding-bottom: 100%;
    height: 0;
    border-radius: 4px;
    transition: background-color 0.15s ease-out, transform 0.15s ease-out, opacity 0.15s ease-out;
    opacity: 0.6;
}

.beat-box.active {
    background-color: var(--primary-accent);
    opacity: 1;
    transform: scale(1.05);
    box-shadow: inset 0 0 5px rgba(255,255,255,0.2);
    transition-duration: calc(var(--beat-interval, 0.5s) * 0.4);
}

@keyframes borderFlash {
  0%, 100% {
        border-color: var(--highlight-color);
      box-shadow: 0 0 8px var(--highlight-color), inset 0 0 5px rgba(255,255,255,0.15);
  }
  50% {
        border-color: rgba(249, 168, 38, 0.4);
      box-shadow: inset 0 0 5px rgba(0,0,0,0.4);
  }
}

.beat-box.flashing-border {
    border-width: 2px;
    border-style: solid;
    animation-name: borderFlash;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
}

.bpm-grid-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 0.85em;
    margin-top: 10px;
}

.bpm-multiplier-controls {
    margin-top: 15px;
    padding-top: 10px;
}

.bpm-multiplier-controls h3 {
    margin-bottom: 12px;
    font-size: 1.1em;
    text-align: center;
    color: var(--secondary-accent);
    border-bottom: none;
}

.multiplier-buttons {
    justify-content: space-around;
}

.multiplier-btn {
    padding: 6px 14px;
    font-weight: bold;
    border-width: 1px;
    border-color: var(--border-color);
    color: var(--text-color);
    min-width: 50px;
    opacity: 0.7;
}

.multiplier-btn.selected {
    border-color: var(--primary-accent);
    color: var(--primary-accent);
    background-color: rgba(0, 255, 255, 0.1);
    box-shadow: 0 0 6px var(--primary-accent);
    opacity: 1.0;
}

/* Frequency Panel */
#frequency-panel { 
    flex-grow: 1; 
}

#frequent-words {
    background-color: rgba(0, 0, 0, 0.4);
    padding: 10px;
    border-radius: 5px;
    min-height: 60px;
    border: 1px solid var(--border-color);
    line-height: 1.6;
}

.freq-word { 
    display: inline-block; 
    padding: 3px 8px; 
    margin: 3px 4px; 
    border-radius: 15px; 
    color: #fff; 
    font-size: 0.9em; 
    border: 1px solid transparent; 
    transition: transform 0.2s ease; 
}

.freq-word:hover { 
    transform: translateY(-2px); 
}

.freq-5 { background-color: #c82333; border-color: #bd2130; }
.freq-4 { background-color: #e0a800; border-color: #d39e00; }
.freq-3 { background-color: #007bff; border-color: #007bff; }
.freq-2 { background-color: #218838; border-color: #1e7e34; }

/* RNG Styles */
#rng-controls {
    margin-top: 15px;
    padding-top: 10px;
}

.rng-options {
    justify-content: center;
    margin-bottom: 10px;
}

label.checkbox-label {
     display: flex;
     align-items: center;
     gap: 6px;
    color: var(--text-color);
    font-weight: normal;
     min-width: auto;
     cursor: pointer;
 }

 input[type="checkbox"] {
     cursor: pointer;
     accent-color: var(--primary-accent);
 }

#rng-display-area {
    margin-top: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    min-height: 50px;
    border: 1px dashed var(--border-color);
    overflow: hidden;
}

.rng-set {
    display: flex;
    gap: 5px;
}

.rng-slot {
    background-color: #111;
    border: 1px solid var(--secondary-accent);
    color: var(--text-bright);
    font-family: var(--font-display);
    font-size: 1.8em;
    width: 2.2em;
    height: 1.8em;
    line-height: 1.7em;
    text-align: center;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.6);
}

.rng-slot span {
    display: block;
    position: relative;
    z-index: 2;
}

.rng-slot.spinning span {
    opacity: 0;
    transition: opacity 0.1s ease-out;
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(15, 15, 30, 0.85);
    backdrop-filter: blur(5px);
}

.modal-content {
    background-color: var(--panel-bg-opaque);
    color: var(--text-color);
    margin: 10% auto;
    padding: 25px;
    border: 1px solid var(--primary-accent);
    width: 80%;
    max-width: 650px;
    border-radius: 10px;
    position: relative;
    box-shadow: 0 5px 25px rgba(0, 255, 255, 0.2);
}

.modal-content h2 { 
    border-bottom: none; 
}

.close-button { 
    color: #aaa; 
    position: absolute; 
    top: 15px; 
    right: 20px; 
    font-size: 32px; 
    font-weight: bold; 
    cursor: pointer; 
    transition: color 0.2s ease; 
}

.close-button:hover, .close-button:focus { 
    color: var(--primary-accent); 
}

#favorites-list { 
    list-style: none; 
    padding: 0; 
    margin-bottom: 20px; 
    max-height: 300px; 
    overflow-y: auto; 
}

#favorites-list li { 
    padding: 8px 5px; 
    border-bottom: 1px solid var(--border-color); 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
}

#favorites-list li:last-child { 
    border-bottom: none; 
}

#favorites-list button { 
    font-size: 0.8em; 
    padding: 3px 6px; 
    border-color: var(--red-color); 
    color: var(--red-color); 
    background: transparent; 
}

#favorites-list button:hover { 
    background-color: rgba(255, 69, 0, 0.1); 
}

#word-list-textarea { 
    width: 100%; 
    margin-top: 10px; 
    margin-bottom: 15px; 
    font-family: monospace; 
    background-color: rgba(0,0,0,0.3); 
    border: 1px solid var(--border-color); 
    color: var(--text-color); 
    padding: 10px; 
    border-radius: 5px; 
    min-height: 200px; 
}

.modal-content button { 
    margin-top: 10px; 
}

.modal-content button i { 
    margin-right: 5px; 
}

/* Rhyme Finder Modal Styles */
.rhyme-modal-header {
    text-align: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px dashed var(--border-color);
}

#rhyme-modal-dynamic-heading {
    font-size: 1.2em;
    font-weight: bold;
    color: var(--text-bright);
    margin-bottom: 8px;
    line-height: 1.15;
    text-align: center;
    padding: 4px 6px;
    background-color: rgba(0, 255, 255, 0.08);
    border: 1px solid var(--primary-accent);
    border-radius: 6px;
    text-shadow: 0 0 2px var(--primary-accent);
    max-width: 95%;
    margin-left: auto;
    margin-right: auto;
}

.vowel-pattern-block {
    display: inline-block;
    background-color: rgba(0, 0, 0, 0.3);
    color: var(--secondary-accent);
    border: 1px solid var(--secondary-accent);
    padding: 2px 7px;
    border-radius: 4px;
    font-family: monospace;
    font-size: 1em;
    font-weight: bold;
    min-width: 2em;
    text-align: center;
    box-shadow: 0 1px 2px rgba(0,0,0,0.13);
    transition: transform 0.2s ease;
    margin: 0 2px;
    vertical-align: middle;
}

.vowel-pattern-block:hover {
    transform: scale(1.05);
}

.rhyme-legend {
    margin-top: 10px;
    font-size: 0.8em;
    opacity: 0.8;
    text-align: center;
}

.rhyme-legend span {
    padding: 2px 5px;
    border-radius: 3px;
    margin: 0 3px;
    display: inline-block;
}

.rhyme-legend .rhyme-freq-high { color: var(--red-color); background-color: rgba(255, 69, 0, 0.2);}
.rhyme-legend .rhyme-freq-med { color: var(--highlight-color); background-color: rgba(249, 168, 38, 0.2);}
.rhyme-legend .rhyme-freq-low { color: var(--green-color); background-color: rgba(0, 255, 0, 0.15);}
.rhyme-legend .rhyme-freq-none { color: var(--text-color); opacity: 0.8; background-color: rgba(128,128,128, 0.1);}

#rhyme-results-list {
    position: relative;
    list-style: none;
    padding: 0;
    margin-top: 15px;
    max-height: 350px;
    overflow-y: auto;
    display: flex;
    flex-wrap: wrap;
    gap: 8px 15px;
    border: 1px solid var(--border-color);
    background-color: rgba(0,0,0, 0.2);
    padding: 10px;
    border-radius: 4px;
}

#rhyme-results-list li {
    position: relative;
    padding: 5px 10px;
    background-color: rgba(255, 255, 255, 0.08);
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    flex-basis: calc(33.33% - 12px);
    text-align: center;
    font-size: 0.95em;
    color: var(--text-bright);
    cursor: default;
    transition: background-color 0.2s ease;
}

#rhyme-results-list li:hover {
    background-color: rgba(0, 255, 255, 0.1);
}

#rhyme-results-list li.rejected {
    text-decoration: line-through;
    opacity: 0.5;
    font-style: italic;
    cursor: not-allowed;
    border-left-color: #555;
    color: #888;
}

#rhyme-results-list li.rejected:hover {
    background-color: inherit;
}

#rhyme-results-list li.slant-tagged {
    font-style: italic;
    color: var(--secondary-accent);
}

#rhyme-results-list li.manually-added {
    text-decoration: underline;
    color: var(--green-color);
}

#rhyme-no-results {
    margin-top: 15px;
    opacity: 0.7;
    text-align: center;
}

.add-rhyme-section {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px dashed var(--border-color);
    display: flex;
    gap: 10px;
    align-items: center;
}

#manual-rhyme-input {
    flex-grow: 1;
    padding: 8px 10px;
    border: 1px solid var(--border-color);
    background-color: rgba(0,0,0, 0.2);
    color: var(--text-bright);
    border-radius: 4px;
    font-size: 0.95em;
}

#add-manual-rhyme-button {
    border-color: var(--green-color);
    color: var(--green-color);
    white-space: nowrap;
}

#add-manual-rhyme-button:hover {
    background-color: rgba(0, 255, 0, 0.1);
    box-shadow: 0 0 8px var(--green-color);
}

/* Shaking Animations */
@keyframes shake {
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(2px, -1px); }
  50% { transform: translate(-2px, 1px); }
  75% { transform: translate(1px, 2px); }
}

body.screen-shaking {
    animation: shake 0.15s linear 1;
}

/* New Gentle Buzz Animation for word display */
@keyframes buzz-on-beat {
  0%, 100% { transform: translateY(0) scale(1); }
  10%, 30% { transform: translateY(-1px) scale(1.01); }
}

/* Syllable Filter Section Styling */
.syllable-filter-section {
    margin: 15px 0;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.syllable-header {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 1px dashed var(--border-color);
}

.syllable-header h3 {
    font-size: 1em;
    color: var(--secondary-accent);
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0;
    text-align: center;
}

.syllable-reset-button {
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--text-color);
    cursor: pointer;
    padding: 4px;
    border-radius: 3px;
    transition: color 0.2s ease, background-color 0.2s ease;
    font-size: 0.8em;
    opacity: 0.7;
}

.syllable-reset-button:hover {
    color: var(--primary-accent);
    background-color: rgba(0, 255, 255, 0.1);
    opacity: 1;
}

.syllable-controls {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.syllable-select {
    width: 60px;
    min-width: 60px;
    max-width: 60px;
    text-align: center;
    font-size: 0.9em;
    padding: 6px 8px;
    background-color: var(--panel-bg);
    border: 1px solid var(--primary-accent);
    color: var(--primary-accent);
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='5'%3E%3Cpath fill='%2300ffff' d='M0 0l5 5 5-5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 8px center;
    padding-right: 25px;
}

.syllable-select:hover {
    background-color: rgba(0, 255, 255, 0.1);
    box-shadow: 0 0 8px var(--primary-accent);
    color: var(--text-bright);
}

.syllable-select:focus {
    outline: none;
    box-shadow: 0 0 8px var(--primary-accent);
    background-color: rgba(0, 255, 255, 0.1);
    color: var(--text-bright);
}

.syllable-select option {
    background-color: var(--panel-bg);
    color: var(--text-color);
    padding: 4px;
}

.word-nav-arrow.top-bottom-arrow.up-arrow,
.word-nav-arrow.top-bottom-arrow.down-arrow,
.word-nav-arrow.side-arrow.left-arrow,
.word-nav-arrow.side-arrow.right-arrow {
    /* Remove translateX(-50%) and translateY(-50%) for perfect centering */
    /* transform: translateZ(10px); */
}

/* Pulse effect for chevrons on hover */
.word-nav-arrow:hover {
    animation: chevron-pulse 0.4s cubic-bezier(.4,2,.6,1);
}

@keyframes chevron-pulse {
    0% { transform: scale(1); color: var(--primary-accent); }
    50% { transform: scale(1.25); color: var(--highlight-color); }
    100% { transform: scale(1); color: var(--primary-accent); }
}

/* --- Rhyme Finder Sorting Controls --- */
.rhyme-sort-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 12px 0 16px 0;
    font-size: 1em;
}
.sort-label {
    color: var(--secondary-accent);
    font-weight: bold;
    margin-right: 6px;
}
.rhyme-sort-btn {
    background: none;
    border: 1.5px solid var(--border-color);
    color: var(--primary-accent);
    border-radius: 6px;
    padding: 6px 10px;
    font-size: 1.1em;
    cursor: pointer;
    transition: background 0.2s, border-color 0.2s, color 0.2s, box-shadow 0.2s;
    outline: none;
    position: relative;
}
.rhyme-sort-btn:hover,
.rhyme-sort-btn:focus {
    background: rgba(0,255,255,0.08);
    border-color: var(--primary-accent);
    color: var(--text-bright);
    box-shadow: 0 0 8px var(--primary-accent);
    z-index: 1;
}
.rhyme-sort-btn.active {
    background: rgba(0,255,255,0.18);
    border-color: var(--secondary-accent);
    color: var(--secondary-accent);
    box-shadow: 0 0 10px var(--secondary-accent);
}
.rhyme-sort-btn i {
    pointer-events: none;
}

.rhyme-x {
    display: none;
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1em;
    color: var(--red-color);
    cursor: pointer;
    user-select: none;
    z-index: 2;
    background: none;
    border: none;
    padding: 0;
    line-height: 1;
}

.rhyme-tag {
    display: none;
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1em;
    color: var(--secondary-accent);
    cursor: pointer;
    user-select: none;
    z-index: 2;
    background: none;
    border: none;
    padding: 0;
    line-height: 1;
}
#rhyme-results-list li:hover:not(.rejected) .rhyme-x {
    display: inline;
}
#rhyme-results-list li:hover:not(.rejected) .rhyme-tag {
    display: inline;
}
#rhyme-results-list li.rejected .rhyme-x {
    display: inline;
    cursor: pointer !important;
}

@keyframes rhyme-x-pulse {
    0% { transform: translateY(-50%) scale(1); }
    50% { transform: translateY(-50%) scale(1.25); }
    100% { transform: translateY(-50%) scale(1); }
}
.rhyme-x:hover {
    animation: rhyme-x-pulse 0.25s cubic-bezier(.4,1.6,.6,1) 1;
    color: var(--highlight-color);
    text-shadow: 0 0 6px var(--highlight-color);
}

.rhyme-tag:hover {
    animation: rhyme-x-pulse 0.25s cubic-bezier(.4,1.6,.6,1) 1;
    color: var(--highlight-color);
    text-shadow: 0 0 6px var(--highlight-color);
}
